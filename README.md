## BookLoop (중고책 교환 보드)

간편한 중고책 교환 게시판. 회원가입 없이 닉네임/비밀번호로 글·댓글 작성 및 수정/삭제 인증을 지원합니다.

### 기술 스택
- 프론트엔드: HTML, CSS, JavaScript
- 백엔드: PHP (PDO MySQL)
- 데이터베이스: MySQL (utf8mb4)
- 배포: dothome.co.kr 호스팅

### 핵심 기능
- 메인: 인기/최근 글, 빠른검색
- 게시판: 목록/상세/쓰기(연락 수단은 사용자 자유 입력)
- 검색/정렬: 과목, 상태, 가격(범위)
- 거래 체크리스트 모달 가이드
- 댓글: 닉네임/비밀번호 기반 수정·삭제 인증

---

## 폴더 구조(계획)

단순 구조(하위 메뉴 폴더 없이 파일명으로 식별):

```bash
bookloop/
├─ pages/                      # 공개 페이지 루트 (정적 HTML)
├─ assets/
│  ├─ css/                    # 페이지별 CSS (파일명 동일 규칙)
│  └─ js/                     # 페이지별 JS (파일명 동일 규칙)
├─ api/                        # 백엔드 엔드포인트 (파일명 동일 규칙)
├─ config/                     # env.php, db.php (서버 설정/DB 연결)
├─ lib/                        # 공통 헬퍼/유틸
└─ sql/                        # DB 스키마/시드
```

## 파일명 매핑 규칙
- 페이지 → CSS: `pages/{page}.html` → `assets/css/{page}.css`
- 페이지 → JS:  `pages/{page}.html` → `assets/js/{page}.js`

예) `pages/write.html` → `assets/css/write.css`, `assets/js/write.js`

---

## 페이지 명세(요약)
- 메인: 인기/최근 리스트, 빠른검색 → 게시판 목록 이동
- 게시판 목록: 제목/저자/과목/상태/희망가/닉네임/등록일/조회수 + 검색/정렬/페이지네이션
- 게시글 상세: 본문, 연락 수단, 댓글 CRUD, 체크리스트 모달, 비밀번호 인증 수정/삭제
- 글 작성: 닉네임/비밀번호/제목/저자/과목/상태/가격/연락/내용, 클라·서버 검증
- 가이드: 안전 거래 주의, 체크리스트(모달)

---

## 데이터베이스 설계(요약)
- 테이블: `posts`, `comments`
- posts 주요 컬럼: 닉네임, 비밀번호 해시, 제목, 저자, 과목, 상태(상/중/하), 가격(원), 연락 수단, 내용, 조회수, 댓글수, 생성/수정일
- comments 주요 컬럼: post_id, 닉네임, 비밀번호 해시, 내용, 생성일
- 인덱스: 과목/가격/생성일, 필요 시 전문검색(FULLTEXT) 검토

---

## 보안/검증(정책)
- 비밀번호: 서버 해시 저장 및 검증
- XSS: 출력 이스케이프, 입력 검증 병행
- CSRF: 폼 토큰(세션 기반)
- SQL 인젝션: Prepared Statement 사용
- 스팸/남용: 간단한 레이트 리미트, 허니팟, 실패 쿨다운

---

## 작업 단계(Front-first 세분화)

프론트엔드 UI/UX를 먼저 완성하고, 이후 백엔드·DB를 연결합니다.

1) 프로젝트 셋업(플랜만 수립)
   - 폴더 생성 계획 확정: `pages/`, `assets/css/`, `assets/js/`, `api/`
   - 페이지 목록 확정: index, list, view, write, guide
   - 파일명 매핑 규칙 재확인(페이지명과 동일 파일명)

2) 공통 디자인 시스템 기획
   - 컬러/타이포/간격 스케일 정의(README에 문서화)
   - 유틸리티 클래스 목록 정의(레이아웃, 버튼, 폼, 배지 등)
   - 컴포넌트 정의: 헤더, 푸터, 네비, 카드, 테이블, 모달, 폼 필드

3) 정적 마크업 와이어프레임(HTML 골격)
   - `pages/index.html`: 인기/최근 블록, 빠른검색 폼 자리
   - `pages/list.html`: 검색바, 정렬 셀렉트, 테이블/카드 목록, 페이지네이션 자리
   - `pages/view.html`: 본문 영역, 댓글 영역, 체크리스트 모달 트리거 버튼 자리
   - `pages/write.html`: 입력 폼(닉네임/비밀번호/제목/저자/과목/상태/가격/연락/내용) 자리
   - `pages/guide.html`: 안전 거래 주의사항, 체크리스트 섹션
   - 접근성 기본 속성(랜드마크, 라벨/aria) 포함 계획

4) 스타일 기초 설계(CSS 설계만 문서화)
   - 공통 베이스: 리셋/변수/유틸(버튼, 입력, 그리드, 모달)
   - 페이지별 CSS 계획: index.css, list.css, view.css, write.css, guide.css 범위 정의
   - 반응형 기준(브레이크포인트) 및 다크모드 정책 결정(옵션)

5) 인터랙션 설계(JS 동작 정의만 문서화)
   - index.js: 빠른검색 폼 제출 → list 페이지로 파라미터 전달
   - list.js: 검색/정렬 UI 이벤트, 페이지네이션 클릭 이벤트
   - view.js: 체크리스트 모달 열기/닫기, 댓글 폼 검증 흐름(프론트 단)
   - write.js: 폼 검증 규칙(필수/길이/숫자), 제출 시 성공/에러 UI
   - guide.js: 모달 또는 아코디언 인터랙션(선택)

6) 목업 데이터/흐름 정의(옵션, 코드 없이 설명만)
   - JSON 구조 샘플 정의(목록/상세/댓글)
   - 로딩/빈 상태/에러 상태 UI 기획

7) 접근성·반응형·브라우저 대응 기준 정리
   - 키보드 트랩/포커스 관리(모달)
   - 모바일 뷰 우선 배치, 리스트/테이블 반응형 패턴 선택
   - 최소 지원 브라우저 범위 정의

8) 프론트 QA 체크리스트 작성
   - 필드 검증 시나리오, 경계 케이스(공백/최대 길이/숫자 범위)
   - UI 깨짐/오버플로우/줄바꿈, 색 대비 체크
   - 모달 접근성, 포커스 이동, 스크롤 잠금

9) 백엔드/API 설계(다음 단계)
   - 엔드포인트 설계, 요청/응답 스키마, 에러 코드 정책
   - 보안(레이트 리미트, CSRF, XSS, SQLi 방어) 정책

10) DB/배포(후속 단계)
   - 스키마 적용, PDO 연결, dothome 배포, 환경 점검

---

## dothome 배포 참고
- PHP 7.4+ 권장, `pdo_mysql` 등 모듈 확인
- 인코딩: `utf8mb4`
- 업로드: 프로젝트 루트 업로드, 민감 설정 파일은 서버에만 보관
- URL: 쿼리스트링 기반으로 단순화(리라이트 의존 최소화)

---

## 의사결정 포인트
- 인기 기준(조회/댓글 가중치, 기간 제한)
- 검색 범위(제목/저자 vs 본문 포함)
- 상태 분류 확장(미개봉/필기 등)
- 연락 수단 입력 정책(자유/규격화, 마스킹)
- 비밀번호 정책(길이/복잡도, 실패 제한)
- 스팸 방지 수단(허니팟/간단 캡차)
- 페이지 크기(목록당 N개)
- UI/반응형 기준, 접근성 수준

---

## 현재 상태
- 구현 코드는 포함하지 않고, 계획과 구조/매핑 규칙만 문서화되어 있습니다.

---

## 페이지별 명세(작성 템플릿 포함)

아래 각 페이지 섹션을 채워가며 구체 사양을 확정하세요. (코드는 나중 단계)

### 1) 메인 페이지 Home (`pages/index.html`)
- 목적: 첫 화면에서 빠른 탐색과 안전 거래 안내 노출
- 주요 블록
  - 헤더: 로고, 상단 빠른검색(제목/저자/과목)
  - 내비게이션: [메인] [교환 게시판] [거래 가이드] [글쓰기]
  - 히어로/배너: “안전하고 간편한 교환을 위한 체크리스트 보기” 링크
  - 퀵 필터: 과목, 상태(상/중/하), 가격정렬(낮→높/높→낮), 검색 버튼
  - 카드 그리드(3열): 인기/최근 도서 요약 카드 + [전체 보기]
  - 푸터: © BookLoop | 이용안내 | 문의메일
- UX 포인트: 상단 검색/필터로 즉시 탐색, 체크리스트 배너로 안전 안내
- 데이터(프론트 기준): 카드 목록 목업 데이터(제목/저자/과목/상태/가격)
- 상호작용: 빠른검색/필터 → list 페이지로 파라미터 전달
- 상태/빈 화면: 인기/최근 데이터 없을 때 대체 안내 문구
- 오픈 질문: 카드 3열 고정 vs 반응형 1–3열 가변?

### 2) 교환 게시판 – 목록 List (`pages/list.html`)
- 목적: 조건별 검색·정렬로 빠르게 비교
- 주요 블록
  - 헤더/내비: 공통
  - 상단 검색바: 제목/저자/과목
  - 필터바: 과목, 상태, 가격정렬, 적용 버튼
  - 목록 테이블: 제목(상세 링크), 저자, 과목, 상태, 가격, (필요 시 등록일/조회수)
  - 페이지네이션
  - 푸터: 안전거래 팁/신고 안내 링크
- UX 포인트: 열 정렬/필터로 빠른 비교, 제목 클릭 → 상세 이동
- 데이터(프론트 기준): 테이블 행 목업, 페이지네이션 메타(page/size/total)
- 상호작용: 정렬/필터/검색 이벤트, 페이지 이동
- 상태/빈 화면: “조건에 맞는 결과가 없습니다” 메시지
- 오픈 질문: 기본 정렬(등록일 vs 가격 vs 조회수) 기준

### 3) 교환 게시판 – 상세 View (`pages/view.html`)
- 목적: 교환 결정에 필요한 정보와 안전 절차 제공
- 주요 블록
  - 헤더/내비: 공통
  - 타이틀 행: 제목, 상태 배지, 조회수
  - 메타 정보: 저자/과목, 희망가, 등록일, 닉네임
  - 본문: 상세 설명(텍스트), 이미지 썸네일(옵션)
  - 연락 수단: 이메일/전화/오픈채팅 등 텍스트 표시
  - 체크리스트: 모달 열기 버튼, 교내 만남 팁
  - 댓글: 닉네임/내용, 삭제 시 댓글 비밀번호 확인(정책만 명시)
  - 액션: [목록으로] [수정/삭제(글비번 확인)]
  - 푸터: 안전 유의/신고 안내
- UX 포인트: 상태 배지/가격 상단 노출, 체크리스트 모달로 안전 절차 유도
- 데이터(프론트 기준): 본문/이미지/연락수단 목업, 댓글 리스트 목업
- 상호작용: 모달 열기/닫기, 댓글 폼 검증 흐름(프론트)
- 상태/빈 화면: 댓글 없음 표시, 이미지 없을 때 플레이스홀더
- 오픈 질문: 이미지 라이트박스 적용 여부, 조회수 표기 방식

### 4) 글쓰기 Write (`pages/write.html`)
- 목적: 표준화된 입력으로 품질 높은 게시글 수집
- 주요 블록
  - 헤더/내비: 공통
  - 폼 필드: 제목, 저자, 과목, 상태(상/중/하), 희망가(정수), 연락 수단, 닉네임, 글비밀번호, 내용(상세설명), 이미지 업로드(선택)
  - 버튼: [등록] [취소]
  - 푸터: 작성 가이드/금지 항목
- UX 포인트: 필수/선택 필드 명확화, 에러 메시지 가이드
- 데이터(프론트 기준): 입력값 검증 규칙(길이/형식/숫자 범위)
- 상호작용: 제출 전 클라이언트 검증, 성공/실패 메시지 정책
- 상태/빈 화면: 검증 실패 시 필드별 에러 안내 패턴
- 오픈 질문: 이미지 업로드 1장 vs 다중, 최대 용량/형식

### 5) 거래 가이드 & 체크리스트 Guide (`pages/guide.html`)
- 목적: 안전 거래 문화를 학습/준수하도록 돕기
- 주요 블록
  - 섹션A: 체크리스트(체크박스 UI)
  - 섹션B: 교내 만남 장소 추천(정적 지도/텍스트)
  - 섹션C: FAQ
  - 푸터: 신고/문의, 개인정보 간단정책
- UX 포인트: 상세와 동일 체크리스트를 공유(일관 경험)
- 데이터(프론트 기준): 정적 텍스트/이미지 리소스 목록
- 상호작용: 체크 상태 유지 여부(프론트만, 세션/로컬스토리지 사용 검토)
- 상태/빈 화면: 리소스 로딩 실패 시 대체 텍스트
- 오픈 질문: 체크 상태 영속화 필요성

### 6) 체크리스트 모달(상세에서 호출)
- 목적: 거래 직전 필수 확인 절차 제공
- 주요 블록: 체크 항목 리스트, [체크 완료], [닫기]
- UX 포인트: 키보드 트랩/포커스 관리, 스크롤 잠금
- 상호작용: 열기/닫기, 체크 전체 선택(옵션)
- 접근성: aria-labelledby/aria-modal, ESC 닫기

### 7) 공통 레이아웃(헤더/내비/푸터)
- 목적: 사이트 전역 일관성과 탐색성 보장
- 헤더: 로고, 검색, 알림배너(안전거래 안내)
- 내비: [메인] [교환 게시판] [거래 가이드] [글쓰기]
- 푸터: 저작권/문의, 약관/정책 링크
- 접근성: landmark(role)와 스킵 링크 고려

---

## 프론트엔드 파일/폴더 계획(컴포넌트 분리 포함)

백엔드와 무관하게, 정적 자원만으로 구성되는 구조입니다. 아직 파일을 생성하지 않고, 어떤 파일이 있어야 하는지 계획만 명시합니다.

```bash
bookloop/
├─ pages/                               # 정적 페이지 HTML
│  ├─ index.html                        # 메인(Home)
│  ├─ list.html                         # 교환 게시판 목록
│  ├─ view.html                         # 게시글 상세
│  ├─ write.html                        # 글쓰기
│  └─ guide.html                        # 거래 가이드
├─ assets/
│  ├─ css/
│  │  ├─ base/
│  │  │  ├─ reset.css                   # 브라우저 기본 스타일 초기화
│  │  │  ├─ variables.css               # 색/타이포/간격 등 디자인 토큰
│  │  │  └─ utilities.css               # 공통 유틸(그리드, 플렉스, 배지, 버튼 등)
│  │  ├─ components/
│  │  │  ├─ header.css                  # 헤더(로고/검색)
│  │  │  ├─ nav.css                     # 내비게이션(메뉴)
│  │  │  ├─ footer.css                  # 푸터
│  │  │  ├─ card.css                    # 도서 카드 컴포넌트
│  │  │  ├─ table.css                   # 목록 테이블 스타일
│  │  │  ├─ form.css                    # 폼(인풋/셀렉트/에러메시지)
│  │  │  ├─ modal.css                   # 모달(체크리스트 포함 공통)
│  │  │  └─ pagination.css              # 페이지네이션
│  │  ├─ pages/
│  │  │  ├─ index.css                   # 메인 전용 스타일(히어로/퀵필터)
│  │  │  ├─ list.css                    # 목록 페이지 전용
│  │  │  ├─ view.css                    # 상세 페이지 전용
│  │  │  ├─ write.css                   # 글쓰기 전용
│  │  │  └─ guide.css                   # 가이드 전용
│  │  └─ app.css                        # 로드 순서 관리용(임포트/집계)
│  └─ js/
│     ├─ core/
│     │  ├─ dom.js                      # 셀렉터/클래스 토글 등 DOM 헬퍼
│     │  ├─ events.js                   # 위임/키보드 핸들러 유틸
│     │  └─ state.js                    # 간단 상태/스토리지 유틸(로컬/세션)
│     ├─ components/
│     │  ├─ modal.js                    # 모달 열기/닫기/포커스 관리
│     │  ├─ checklist.js                # 체크리스트 UI 로직(상세/가이드 공용)
│     │  ├─ pagination.js               # 페이지네이션 UI 업데이트
│     │  ├─ form-validate.js            # 클라이언트 검증 규칙/메시지
│     │  └─ header-search.js            # 헤더 빠른검색 제출 처리
│     ├─ pages/
│     │  ├─ index.js                    # 메인: 퀵필터 → list로 이동
│     │  ├─ list.js                     # 목록: 검색/정렬/페이지 이동 UI
│     │  ├─ view.js                     # 상세: 모달/댓글(프론트 상호작용)
│     │  ├─ write.js                    # 글쓰기: 검증/상태 제어
│     │  └─ guide.js                    # 가이드: 체크리스트/아코디언
│     └─ app.js                         # 초기화(공통 컴포넌트 바인딩)
└─ README.md
```

### 로드 순서/의존 관계(권장)
1) CSS: `base` → `components` → `pages` → `app.css`
2) JS: `core` → `components` → `pages` → `app.js`

### 컴포넌트 기준(선정 사유)
- header/nav/footer: 전 페이지에 공통, 마크업/스타일/스크립트 분리로 재사용성↑
- card/table/form/modal/pagination: 여러 페이지에서 재사용되는 시각/패턴 요소
- checklist: 상세/가이드 모두에서 활용되므로 독립 모듈화

### 페이지별 필요 자원 체크리스트
- index: header.css, nav.css, footer.css, card.css, modal.css, index.css, header-search.js, checklist.js(링크), index.js
- list: header.css, nav.css, footer.css, table.css, form.css, pagination.css, list.css, pagination.js, form-validate.js, list.js
- view: header.css, nav.css, footer.css, card.css(썸네일 옵션), modal.css, view.css, checklist.js, modal.js, view.js
- write: header.css, nav.css, footer.css, form.css, write.css, form-validate.js, write.js
- guide: header.css, nav.css, footer.css, modal.css, guide.css, checklist.js, guide.js

### 네이밍/경로 규칙
- 페이지 단위: `pages/{name}.html` ↔ `assets/css/pages/{name}.css` ↔ `assets/js/pages/{name}.js`
- 공통 컴포넌트: `assets/css/components/*.css`, `assets/js/components/*.js`
- 코어 유틸: `assets/js/core/*.js`

### 앞으로의 진행
- 위 계획 파일만 먼저 생성(빈 파일 가능) → 마크업 와이어프레임 → 스타일/상호작용 순으로 단계적 구현
- 백엔드 연동은 별도 단계에서 API 계약 확정 후 진행



